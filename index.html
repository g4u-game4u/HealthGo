<!DOCTYPE html>
<html class="dark" lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Factory Task Tracker</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#0d7ff2",
            "background-light": "#f5f7f8",
            "background-dark": "#101922",
          },
          fontFamily: {
            "display": ["Inter", "sans-serif"]
          },
          borderRadius: {
            "DEFAULT": "0.25rem",
            "lg": "0.5rem",
            "xl": "0.75rem",
            "full": "9999px"
          },
        },
      },
    }
  </script>
  <style>
    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display">

  <!-- App Container -->
  <div id="app" class="relative flex h-auto min-h-screen w-full flex-col">
    
    <!-- Login Screen -->
    <div id="login-screen" class="flex h-auto min-h-screen w-full flex-col items-center bg-[#101a23] p-4">
      <div class="flex w-full max-w-md flex-col items-center pt-20">
        <!-- App Icon/Logo -->
        <div class="mb-8 flex h-16 w-16 items-center justify-center rounded-2xl bg-[#0d80f2]">
          <span class="material-symbols-outlined text-white" style="font-size: 40px;">factory</span>
        </div>
        
        <!-- Headline -->
        <h1 class="text-white tracking-light text-[32px] font-bold leading-tight text-center pb-2 pt-6">Welcome Back</h1>
        <p class="text-white/70 text-base font-normal leading-normal pb-8 text-center">Sign in to your factory management account</p>
        
        <!-- Login Form -->
        <form id="login-form" class="flex w-full flex-col gap-4">
          <!-- Email Field -->
          <div class="flex w-full flex-wrap items-end">
            <label class="flex w-full flex-col min-w-40 flex-1">
              <p class="text-white text-base font-medium leading-normal pb-2">Email or Employee ID</p>
              <input 
                id="email-input"
                type="text"
                class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-white focus:outline-0 focus:ring-2 focus:ring-[#0d80f2]/50 border border-[#314d68] bg-[#182634] focus:border-[#0d80f2] h-14 placeholder:text-[#90adcb] p-[15px] text-base font-normal leading-normal" 
                placeholder="Enter your email or ID"
              />
              <p id="email-error" class="text-red-400 text-sm mt-1 hidden"></p>
            </label>
          </div>
          
          <!-- Password Field -->
          <div class="flex w-full flex-wrap items-end">
            <label class="flex w-full flex-col min-w-40 flex-1">
              <p class="text-white text-base font-medium leading-normal pb-2">Password</p>
              <div class="relative flex w-full flex-1 items-stretch">
                <input 
                  id="password-input"
                  type="password"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-white focus:outline-0 focus:ring-2 focus:ring-[#0d80f2]/50 border border-[#314d68] bg-[#182634] focus:border-[#0d80f2] h-14 placeholder:text-[#90adcb] p-[15px] pr-12 text-base font-normal leading-normal" 
                  placeholder="Enter your password"
                />
                <button 
                  type="button"
                  id="toggle-password"
                  class="absolute inset-y-0 right-0 flex items-center pr-4 text-[#90adcb] hover:text-white"
                >
                  <span class="material-symbols-outlined">visibility</span>
                </button>
              </div>
              <p id="password-error" class="text-red-400 text-sm mt-1 hidden"></p>
            </label>
          </div>
          
          <!-- Login Error Message -->
          <p id="login-error" class="text-red-400 text-sm text-center hidden"></p>
          
          <!-- Login Button -->
          <div class="flex w-full px-0 py-6">
            <button 
              type="submit"
              id="login-button"
              class="flex min-w-[84px] max-w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-5 flex-1 bg-[#0d80f2] text-white text-base font-bold leading-normal tracking-[0.015em] hover:bg-[#0b6bce] transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
            >
              <span id="login-button-text" class="truncate">Log In</span>
              <span id="login-spinner" class="hidden material-symbols-outlined animate-spin">progress_activity</span>
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Task List Screen (hidden by default) -->
    <div id="task-list-screen" class="hidden flex-col min-h-screen">
      <!-- Top App Bar -->
      <header class="flex items-center bg-background-light dark:bg-background-dark p-4 sticky top-0 z-10 border-b border-white/10">
        <div class="flex size-12 shrink-0 items-center justify-start text-zinc-900 dark:text-white">
          <span class="material-symbols-outlined text-3xl">checklist</span>
        </div>
        <h1 class="flex-1 text-lg font-bold leading-tight tracking-[-0.015em] text-zinc-900 dark:text-white text-center">Today's Checklist</h1>
        <div class="flex items-center justify-end gap-2">
          <!-- Sync Status Indicator -->
          <div id="sync-indicator" class="hidden flex items-center gap-1 text-xs text-zinc-500 dark:text-zinc-400 mr-2">
            <span class="material-symbols-outlined text-sm animate-spin">sync</span>
            <span id="sync-count">0</span>
          </div>
          <button 
            id="refresh-button"
            class="flex h-10 w-10 cursor-pointer items-center justify-center overflow-hidden rounded-lg bg-transparent text-zinc-900 dark:text-white p-0 hover:bg-white/10 transition-colors"
          >
            <span class="material-symbols-outlined text-2xl">refresh</span>
          </button>
          <button 
            id="logout-button"
            class="flex h-10 w-10 cursor-pointer items-center justify-center overflow-hidden rounded-lg bg-transparent text-zinc-900 dark:text-white p-0 hover:bg-red-500/20 transition-colors"
            title="Logout"
          >
            <span class="material-symbols-outlined text-2xl">logout</span>
          </button>
        </div>
      </header>
      
      <!-- Main Content -->
      <main class="flex-1 p-4">
        <div class="flex flex-col gap-4">
          <!-- Active Tasks Section -->
          <section id="active-tasks" class="flex flex-col gap-4">
            <!-- Task cards will be rendered here -->
          </section>
          
          <!-- Completed Section Header -->
          <div id="completed-header" class="pt-4 hidden">
            <h4 class="text-sm font-bold uppercase leading-normal tracking-widest text-zinc-500 dark:text-zinc-400 text-center">Completed</h4>
          </div>
          
          <!-- Completed Tasks Section -->
          <section id="completed-tasks" class="flex flex-col gap-4 opacity-50">
            <!-- Completed task cards will be rendered here -->
          </section>
        </div>
      </main>
    </div>
    
    <!-- Completion Confirmation Modal -->
    <div id="completion-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center">
      <!-- Backdrop -->
      <div class="absolute inset-0 bg-black/60" id="modal-backdrop"></div>
      
      <!-- Modal Content -->
      <div class="relative bg-[#182634] rounded-xl p-6 mx-4 max-w-sm w-full shadow-xl border border-[#314d68]">
        <h2 class="text-white text-xl font-bold text-center mb-4">Task completed?</h2>
        <p class="text-white/70 text-center mb-6">Mark this task as complete?</p>
        <div class="flex gap-4">
          <button 
            id="modal-decline"
            class="flex-1 h-12 rounded-lg border border-[#314d68] text-white font-medium hover:bg-white/10 transition-colors"
          >
            No
          </button>
          <button 
            id="modal-confirm"
            class="flex-1 h-12 rounded-lg bg-[#0d80f2] text-white font-bold hover:bg-[#0b6bce] transition-colors"
          >
            Yes
          </button>
        </div>
      </div>
    </div>
    
    <!-- Error Toast -->
    <div id="error-toast" class="hidden fixed bottom-4 left-4 right-4 z-50">
      <div class="bg-red-500/90 text-white rounded-lg p-4 shadow-lg flex items-center gap-3 max-w-md mx-auto">
        <span class="material-symbols-outlined">error</span>
        <p id="error-toast-message" class="flex-1 text-sm"></p>
        <button id="error-toast-close" class="text-white/80 hover:text-white">
          <span class="material-symbols-outlined">close</span>
        </button>
      </div>
    </div>
    
  </div>
  
  <script type="module" src="app.js"></script>
</body>
</html>
